#!/command/with-contenv bash
# FFW BG2 Follower AI service run script
# Uses reusable ROS2 service template

set -e

SERVICE_NAME="ffw_bg2_follower_ai"
ROS2_COMMAND="ros2 launch ffw_bringup ffw_bg2_follower_ai.launch.py"
COMMON_SCRIPT="/usr/local/lib/s6-services/ros2_service_run.sh"

if [ -f "${COMMON_SCRIPT}" ]; then
    export SERVICE_NAME="${SERVICE_NAME}"
    export ROS2_COMMAND="${ROS2_COMMAND}"
    # Use env to explicitly pass variables to the script
    # The with-contenv wrapper will preserve these variables
    exec /command/with-contenv env SERVICE_NAME="${SERVICE_NAME}" ROS2_COMMAND="${ROS2_COMMAND}" bash "${COMMON_SCRIPT}"
else
    # Fallback if common script not available
    echo "Error: Common script not found at ${COMMON_SCRIPT}" >&2
    exit 1
fi

